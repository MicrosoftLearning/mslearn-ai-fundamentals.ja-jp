---
lab:
  title: Azure AI Foundry ポータルでコンテンツ解釈を使用してデータを抽出する
---

# Azure AI Foundry ポータルでコンテンツ解釈を使用してデータを抽出する

**Azure AI コンテンツ解釈 (プレビュー)** は生成 AI を使用して、様々な種類のコンテンツ (ドキュメント、画像、ビデオ、オーディオ) を処理してユーザー定義の出力形式に取り込みます。

この演習では、インテリジェント アプリケーションを作成するための Microsoft のプラットフォーム、Azure AI Foundry ポータルで、Azure AI コンテンツ解釈を使用して、請求書のデータを認識します。 

この演習の所要時間はおよそ **25** 分です。

## Azure AI Foundry プロジェクトとコンテンツの解釈タスクを作成する

1. Web ブラウザーで [Azure AI Foundry ポータル](https://ai.azure.com) (`https://ai.azure.com`) を開き、Azure 資格情報を使用してサインインします。 初めてサインインするときに開いたヒントまたはクイック スタート ウィンドウを閉じます。また、必要に応じて左上にある **Azure AI Foundry** ロゴを使用してホーム ページに移動します。それは次の画像のようになります (**[ヘルプ]** ウィンドウが開いている場合は閉じます)。

    ![エージェントの作成が選択されている Azure AI Foundry ホーム ページのスクリーンショット。](./media/azure-ai-foundry-home-page.png)

1. 新しいブラウザー ウィンドウで、 [Azure AI サービスの探索ページ](https://ai.azure.com/explore/aiservices)を開きます。

1. *[AI サービス]* ページで、*[コンテンツの解釈を試す]* タイルを選択します。

1. **[プロジェクトを選択または作成する]** を選択します。 

1. **[+ プロジェクトの作成]** を選択します。

1. ウィザードで、ご自分のプロジェクトの有効な名前を入力します。 

1. **[詳細オプション]** を選択して、次の値を指定します。
    - **Azure AI Foundry リソース**: *既定の名前をそのまま使用します*
    - **[サブスクリプション]**:"*ご自身の Azure サブスクリプション*"
    - **リソース グループ**: *リソース グループを作成または選択します*
    - **リージョン**: 次のいずれかの場所を選択してください。
        * 米国西部
        * スウェーデン中部
        * オーストラリア東部

1. **［作成］** を選択します セットアップ プロセスが完了するまで待ちます。 これには数分かかることがあります。

    >**注**: アクセス許可エラーが発生した場合は、**[修正する]** 　ボタンを選択して、続行する適切なアクセス許可を追加します。

1. プロジェクトが作成されると、既定で [コンテンツの解釈タスクの作成] ウィンドウに移動します。 次の設定を使用して、コンテンツの解釈のタスクを作成します。
    - **タスク名**: `contoso-invoice`
    - **説明**: `An invoice analysis task`
    - *単一ファイルのコンテンツ分析を選択します*
    - **詳細設定**: *既定値のままにします*。

1. **[作成]** を選択して、アプリが作成されるまで待ちます。 

1. **[contoso-invoice]** タスクを選択します。 

## Azure AI Foundry の Azure AI コンテンツ解釈を使用した請求書を分析する 

多くの請求書からデータを抽出し、そのデータをデータベースに保存するとします。 Azure AI コンテンツ解釈を使用して、1 つの請求書を分析し、他の類似した請求書を分析できる独自のアナライザーを構築することができます。 まず、スキーマを定義しましょう。

#### スキーマの定義 

1. *[スキーマの定義]* ページで、テスト ファイルを追加できます。 `https://raw.githubusercontent.com/MicrosoftLearning/mslearn-ai-fundamentals/refs/heads/main/data/contoso-invoice-1.pdf` から [contoso-invoice-1.pdf](https://raw.githubusercontent.com/MicrosoftLearning/mslearn-ai-fundamentals/refs/heads/main/data/contoso-invoice-1.pdf) をダウンロードします。 

1. ファイルを **[スキーマの定義]** ページにアップロードします。 **[請求書データ抽出]** テンプレートを選択します。 請求書データ抽出テンプレートには、アナライザーが検出しようとするデータ フィールドがあらかじめ選択されています。 

    ![コンテンツ解釈ツールの [スキーマの定義] ページのスクリーンショット。](./media/content-understanding/define-schema.png)

1. **［作成］** を選択します これで、フィールドを追加または削除してスキーマを変更できるようになりました。 フィールドの確認が完了したら、**[保存]** を選択します。

    ![作成を選択した後の [スキーマの定義] ページのスクリーンショット。](./media/content-understanding/define-schema-2.png)

1. 分析が実行されるまで待機します。 これには少し時間がかかることがあります。

#### アナライザーをテストする 

1. 分析が完了すると、*[アナライザーのテスト]* ページでアナライザーがどのように行われたかを確認できます。 *[フィールド]* タブを確認します (*注*: 結果全体を表示するには、ウィンドウを展開する必要がある場合があります)。 このデータは請求書に表示されているデータと一致していますか? 
    ![フィールドの結果タブが強調表示されている [アナライザーのテスト] ページのスクリーンショット。](./media/content-understanding/test-analyzer-fields.png)

1. 各フィールドの横に*信頼度スコア*があります。 信頼度スコアは、モデルの結果がどれくらい正確であるかについての信頼度を表します。 結果の信頼度スコアが 100% に近い場合は、予測の信頼度が高いことを示します。

1. *[結果]* タブを確認します。[フィールド] タブに表示されている情報が JSON の [結果] タブにも表示されています。 JSON は、情報がクライアント・アプリケーションとの間でどのように送受信されるのかを示しています。 

    ![[結果] タブが強調表示されている [アナライザーのテスト] ページのスクリーンショット。](./media/content-understanding/test-analyzer-result.png)

1. コンテンツ解釈サービスは、スキーマ内のフィールドに対応するテキストを正しく識別している必要があります。 そうなっていない場合は、*[ラベル データ]* ページを使用して別のサンプル フォームをアップロードし、各フィールドの正しいテキストを明示的に識別することができます。 アナライザーで、請求書データを適切に検出できたことを確認したら、**[アナライザーの一覧]** タブを選択します。 

#### アナライザーをビルドする 

サンプル請求書からフィールドを抽出するモデルのトレーニングが完了したので、類似したフォームで使用するアナライザーをビルドすることができます。 アナライザーをビルドすることで、モデルをデプロイし、それを他の請求書タスクの自動化に使用することができます。

1. *[アナライザーの一覧]* タブで、**[+ アナライザーのビルド]** を選択します。 次のように入力します。 
    - **名前**: `invoice-analyzer`
    - **説明**: `An invoice analyzer`

    ![[アナライザーのビルド] ページのスクリーンショット。](./media/content-understanding/build-analyzer.png)

1. **ビルド**を選択します。 新しいアナライザーの準備が整うのを待ちます ([最新の情報に更新] ボタンで確認できます)。 アナライザーは、前の手順で定義およびテストしたスキーマに基づく予測モデルを使用します。 
1. 次に、ビルドしたアナライザーをテストしてみましょう。 `https://raw.githubusercontent.com/MicrosoftLearning/mslearn-ai-fundamentals/refs/heads/main/data/contoso-invoice-2.pdf` から Contoso [contoso-invoice-2.pdf](https://raw.githubusercontent.com/MicrosoftLearning/mslearn-ai-fundamentals/refs/heads/main/data/contoso-invoice-2.pdf) の別の請求書をダウンロードします。
1. *[アナライザーのビルド]* ページに戻り、invoice-analyzer リンクを選択します。 アナライザーのスキーマで定義されているフィールドが表示されます。
1. invoice-analyzer ページで、*[テスト]* を選択します。
1. **[+ テスト ファイルのアップロード]** ボタンを使用して、*contoso-receipt-2.pdf* をアップロードします。 **[分析の実行]** を選択して、テスト フォームからフィールド データを抽出します。 テストの実行結果を確認します。

    ![ビルドしたアナライザーのテスト結果のスクリーンショット。](./media/content-understanding/build-analyzer-2.png)

1. *[コード例]*] タブを選択します。コードから*エンドポイント*を探します。 プロセスの *アナライザーのビルド* フェーズでは、コンテンツ解釈モデルをエンドポイントにデプロイしました。 このエンドポイントを例に示すようなコードの中で使用して、アプリケーションの反復可能なプロセスにモデルを組み込むことができます。  

    ![ビルドしたアナライザーのコード例のスクリーンショット。](./media/content-understanding/code-example.png)

## クリーンアップ

コンテンツ解釈サービスの操作が終わったら、不要な Azure コストが発生しないように、この演習で作成したリソースを削除する必要があります。

- Azure AI Foundry ポータルで、contoso-receipt プロジェクトに移動して削除します。
- Azure portal において、この演習で作成したリソース グループを削除します。
