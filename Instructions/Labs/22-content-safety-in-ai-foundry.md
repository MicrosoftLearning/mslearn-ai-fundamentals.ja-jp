---
lab:
  title: Azure AI Foundry の Content Safety について確認する
---

# Azure AI Foundry の Content Safety について確認する

Azure AI サービスは、ユーザーがすぐに使用できる、事前構築済みでカスタマイズ可能な API とモデルを使用して、AI アプリケーションを作成するのに役立ちます。 この演習では、テキストと画像のコンテンツを管理できるサービスの 1 つである Azure AI Content Safety について説明します。 インテリジェントなアプリケーションを作成するための Microsoft のプラットフォームである Azure AI Foundry ポータルで、Azure AI Content Safety を使用してテキストを分類し、重大度スコアを割り当てます。 

> **注** この演習の目的は、Azure AI サービスのプロビジョニングと使用方法について一般的に理解することです。 Content Safety を例として使用しますが、この演習ではコンテンツの安全性に関する包括的な知識を得ることは想定していません。

## Azure AI Foundry ポータルでプロジェクトを作成する

1. ブラウザー タブ内で、[Azure AI Foundry ポータル](https://ai.azure.com?azure-portal=true)に移動します。

2. ご自分のアカウントでサインインします。 

3. Azure AI Foundry ポータルのホーム ページで **[プロジェクトの作成]** を選択します。 Azure AI Foundry では、プロジェクトは作業を整理するのに役立つコンテナーです。  

    ![プロジェクトの作成が選択されている Azure AI Foundry ホーム ページのスクリーンショット。](./media/azure-ai-foundry-home-page.png)

4. *[プロジェクトの作成]* ウィンドウに、生成されたプロジェクト名が表示され、そのまま保持できます。 過去にハブを作成したかどうかに応じて、作成する*新しい* Azure リソースの一覧または既存のハブのドロップダウン リストが表示されます。 既存のハブのドロップダウン リストが表示される場合は、 *[新しいハブの作成]* を選択し、ハブの一意の名前を作成して、*[次へ]* を選択します。  
 
    ![ハブとプロジェクトの名前が自動的に生成された [プロジェクトの作成] ウィンドウのスクリーンショット。](./media/azure-ai-foundry-create-project.png)

> **重要**: ラボの残りの部分を完了するには、特定の場所にプロビジョニングされた Azure AI サービスのリソースが必要です。

5. 同じ *[プロジェクトの作成]* ウィンドウで、**[カスタマイズ]** を選択し、米国東部、フランス中部、韓国中部、西ヨーロッパ、米国西部のいずれかの**場所**を選択して、ラボの残りの部分を完了します。 **[作成]** を選択します。 

1. 作成されるリソースを書き留めます。 
- Az AI サービス
- Azure AI ハブ
- Azure AI プロジェクト
- ストレージ アカウント
- Key Vault
- リソース グループ  

6. リソースが作成されると、プロジェクトの *[概要]* ページに移動します。 

7. Content Safety を使用するには、*Azure AI ハブ* リソースへのアクセス許可を更新する必要があります。 これを行うには、[Azure portal](https://portal.azure.com?portal-azure=true) を開き、AI Foundry リソースの作成に使用したものと同じサブスクリプションでログインします。  

8. Azure portal のページ上部にある検索バーを使用して、「**Azure AI Foundry**」を検索して選択します。 リソース ページで、先ほど作成した*タイプ*が **Azure AI ハブ**のリソースを選択します。  

9. Azure portal の左側のウィンドウで、**[アクセス制御 (IAM)]** を選択します。 次に、開いているペインで、プラス記号の横にある **[追加]** を選択し、**[ロールの割り当ての追加]** を選択します。 

![[アクセス制御] ペインで [ロールの割り当ての追加] を選択する場所を示すスクリーンショット。](./media/content-safety/access-control-step-one.png)

10. ロールの一覧で **[Azure AI Safety Evaluator]** を探して選択します。 **[次へ]** を選択します。 

11. 次の設定を使用して、ロールに自分自身を割り当てます。 
    - **[アクセスの割り当て先]**: *[ユーザー、グループ、またはサービス プリンシパル]* を選択します
    - **[メンバー]**: *[メンバーを選択する]* をクリックします
        - 開いている *[メンバーを選択する]* ペインで、自分の名前を見つけます。 自分の名前の横にあるプラス記号アイコンをクリックします。 **[選択]** をクリックします。
    - **[説明]**: *空白のままにします*

12. **[Review and assign] (確認と割り当て)** を選択し、もう一度 **[Review and assign] (確認と割り当て)** を選択してロールの割り当てを追加します。    

13. ブラウザーで [Azure AI Foundry ポータル](https://ai.azure.com?azure-portal=true)に戻ります。 プロジェクトを選択します。 

14. 画面の左側のメニューで、**[AI サービス]** を選択します。
 
    ![[AI サービス] が選択されているプロジェクト画面の左側のメニューのスクリーンショット。](./media/azure-ai-foundry-ai-services.png)  

15. *[AI サービス]* ページで、*[Vision + Document]* タイルを選択して、Azure AI Vision とドキュメントの機能を試します。
    
    ![[Content Safety] タイルのスクリーンショット。](./media/content-safety-tile.png)

## Azure AI Foundry ポータルで Content Safety を使用してテキスト モデレーションを試す 

1. *Content Safety* ページで、*Filter text content* の下で **[テキスト コンテンツのモデレート]** を選択します。

2. *[テキスト コンテンツのモデレート]* ページの、*[試してみる]* 見出しの下で、ドロップダウン メニューから先ほど作成した Azure AI サービスのリソースを選択します。   

3. *[Run a simple test]* で、**[Safe Content]** タイルを選択します。 下のボックスにテキストが表示されることに注目してください。 

4. **[テストの実行]** をクリックします。 テストを実行すると、Content Safety Service のディープ ラーニング モデルが呼び出されます。 このディープ ラーニング モデルは、安全ではないコンテンツを認識するように、既にトレーニングされています。

5. [結果] パネルで結果を調べます。** 重大度レベルは安全から高まで 4 段階、有害なコンテンツは 4 種類あります。 Content Safety AI サービスはこのサンプルを許容範囲内と判断するでしょうか。 注意すべき重要な点は、結果が信頼区間内にあるということです。 Azure AI のすぐに使用できるモデルのように、十分にトレーニングされたモデルは、人間がラベル付けした結果と一致する可能性の高い結果を返すことができます。 テストを実行するたびに、モデルを再度呼び出します。 

6. 次は別のサンプルを試してみましょう。 [Violent content with misspelling] (スペルミスのある暴力的なコンテンツ) の下のテキストを選びます。 下のボックスにコンテンツが表示されていることを確認します。

7. **[テストの実行]** をクリックし、[結果] パネルでもう一度結果を調べます。 

提供されているすべてのサンプルに対してテストを実行し、結果を調べることができます。

## クリーンアップ

これ以上の演習を行わない場合は、不要になったリソースを削除します。 これにより、不要なコストが発生することを防ぎます。

1. [Azure portal]( https://portal.azure.com) を開き、作成したリソースを含むリソース グループを選択します。
1. リソースを選択し、**[削除]** を、次に **[はい]** を選択して確定します。 これでリソースが削除されます。

## 詳細情報

この演習では、Content Safey サービスの一部の機能のみを示しました。 このサービスで実行できる操作の詳細については、[Content Safey のページ](https://learn.microsoft.com/azure/ai-services/content-safety/overview)を参照してください。